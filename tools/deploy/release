#!/bin/bash

TOP_DIR=$(cd $(dirname $0) && pwd)/../../
source $TOP_DIR/tools/docker/config $* >/dev/null

$TOP_DIR/tools/deploy/list $* | grep -v "LOG:" | sort -t ' ' -k 5 | \
awk 'BEGIN{FS=" "}{ \
	printf("http://%s:%s/vnc.html?name=%s&password=%s&autoconnect=1&user=%s&id=%s&life=%s&start=%s\n", $1, $2, $6, $8, $9, $10, $11, $12); \
	printf("    ssh %s@%s -p %s #pwd=%s\n", $13, $1, $3, $7); \
	printf("    http://%s:%s #user=%s,pwd=%s,port=%s\n", $1, $5, $13, $7, $3); \
	printf("    http://%s:%s\n", $1, $4); \
	}'
